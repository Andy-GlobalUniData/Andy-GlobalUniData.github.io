/* ========================================
   animations-mobile.css
   目標：增加動畫過渡效果 + 優化行動版本視覺
   ======================================== */

/* ========================================
   1. 全域頁面進入動畫
   ======================================== */

/* 頁面整體淡入 */
@keyframes pageLoadFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

body {
  animation: pageLoadFadeIn 0.5s ease-out;
}

/* ========================================
   2. 元素進入動畫 - Stagger Effect
   ======================================== */

/* 頁首淡入 + 下滑 */
@keyframes slideDownFade {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.header-container {
  animation: slideDownFade 0.6s ease-out;
}

/* 使用說明淡入 */
@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.user-guide {
  animation: slideInUp 0.6s ease-out 0.1s both;
}

/* 選擇器容器進入動畫 - Stagger */
.select-area-container {
  animation: slideInUp 0.6s ease-out 0.2s both;
}

.select-container {
  animation: slideInUp 0.6s ease-out;
}

/* 每個 select-container 錯開動畫 */
.select-container:nth-child(1) { animation-delay: 0.3s; }
.select-container:nth-child(2) { animation-delay: 0.4s; }
.select-container:nth-child(3) { animation-delay: 0.5s; }
.select-container:nth-child(4) { animation-delay: 0.6s; }

/* 科系篩選區進入動畫 */
#tag-filter-section {
  animation: slideInUp 0.6s ease-out 0.7s both;
}

/* 表格容器進入動畫 */
.table-container,
#school-data-table-container {
  animation: slideInUp 0.6s ease-out 0.8s both;
}

/* ========================================
   3. 互動元素的平滑過渡
   ======================================== */

/* 所有互動元素的基礎過渡 */
button,
input,
select,
textarea,
a,
.select-container,
.filter-tag,
.stat-card {
  transition: all 0.2s ease;
}

/* 按鈕點擊反饋 */
@keyframes buttonPress {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.97);
  }
  100% {
    transform: scale(1);
  }
}

button:active {
  animation: buttonPress 0.3s ease;
}

/* ========================================
   4. 輸入框互動動畫
   ======================================== */

@keyframes inputGlow {
  from {
    box-shadow: 0 0 0 0 rgba(33, 150, 243, 0.7);
  }
  to {
    box-shadow: 0 0 0 8px rgba(33, 150, 243, 0);
  }
}

input:focus,
textarea:focus,
select:focus {
  animation: inputGlow 0.6s ease-out;
}

/* ========================================
   5. 懸停效果增強
   ======================================== */

/* 卡片懸停 - 平滑提升 */
@keyframes cardLift {
  0% {
    transform: translateY(0);
  }
  100% {
    transform: translateY(-4px);
  }
}

.select-container:hover,
.stat-card:hover {
  animation: cardLift 0.3s ease forwards;
}

/* 按鈕懸停 - 輕微發光 */
@keyframes buttonGlow {
  0% {
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
  100% {
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
  }
}

button:hover {
  animation: buttonGlow 0.3s ease forwards;
}

/* ========================================
   6. 加載狀態動畫
   ======================================== */

@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

.loading,
[data-loading="true"] {
  animation: pulse 1.5s ease-in-out infinite;
}

/* ========================================
   7. 資料更新動畫
   ======================================== */

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* 表格行進入動畫 */
tbody tr {
  animation: slideInLeft 0.3s ease-out;
}

tbody tr:nth-child(1) { animation-delay: 0s; }
tbody tr:nth-child(2) { animation-delay: 0.05s; }
tbody tr:nth-child(3) { animation-delay: 0.1s; }
tbody tr:nth-child(4) { animation-delay: 0.15s; }
tbody tr:nth-child(5) { animation-delay: 0.2s; }

/* 科系標籤進入動畫 */
.filter-tag {
  animation: slideInRight 0.3s ease-out;
}

/* ========================================
   8. 行動版本優化 (768px 以下)
   ======================================== */

@media (max-width: 768px) {
  /* 減少動畫執行時間，提升手機流暢度 */
  @keyframes pageLoadFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  @keyframes slideDownFade {
    from {
      opacity: 0;
      transform: translateY(-15px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes slideInUp {
    from {
      opacity: 0;
      transform: translateY(15px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* 加速手機上的動畫 */
  body {
    animation: pageLoadFadeIn 0.3s ease-out;
  }
  
  .header-container {
    animation: slideDownFade 0.4s ease-out;
  }
  
  .user-guide {
    animation: slideInUp 0.4s ease-out 0.05s both;
  }
  
  .select-area-container {
    animation: slideInUp 0.4s ease-out 0.1s both;
  }
  
  .select-container {
    animation: slideInUp 0.4s ease-out;
    margin-bottom: var(--spacing-lg);
  }
  
  .select-container:nth-child(1) { animation-delay: 0.15s; }
  .select-container:nth-child(2) { animation-delay: 0.2s; }
  .select-container:nth-child(3) { animation-delay: 0.25s; }
  .select-container:nth-child(4) { animation-delay: 0.3s; }
  
  #tag-filter-section {
    animation: slideInUp 0.4s ease-out 0.35s both;
  }
  
  .table-container,
  #school-data-table-container {
    animation: slideInUp 0.4s ease-out 0.4s both;
  }
  
  /* 手機上的觸控目標優化 */
  button {
    min-height: 44px;
    min-width: 44px;
    padding: var(--spacing-lg) var(--spacing-xl);
    font-size: var(--font-size-base);
  }
  
  input,
  select,
  textarea {
    min-height: 44px;
    padding: var(--spacing-md) var(--spacing-lg);
    font-size: 16px; /* 防止 iOS 自動縮放 */
  }
  
  /* 減少間距，充分利用空間 */
  .select-area-container {
    flex-direction: column;
    padding: var(--spacing-lg);
  }
  
  .select-container {
    min-width: 100%;
    margin-bottom: var(--spacing-md);
  }
  
  .header-container {
    flex-direction: column;
    gap: var(--spacing-lg);
  }
  
  .export-buttons {
    flex-direction: column;
    width: 100%;
  }
  
  .export-buttons button {
    width: 100%;
    text-align: center;
  }
  
  /* 加大手機上的文字 */
  .select-container h3 {
    font-size: var(--font-size-lg);
  }
  
  .stat-value {
    font-size: 24px;
  }
  
  /* 減弱懸停效果（手機不需要） */
  .select-container:hover {
    transform: none;
  }
  
  .stat-card:hover {
    transform: none;
  }
  
  button:hover {
    animation: none;
  }
}

/* ========================================
   9. 超小螢幕優化 (480px 以下)
   ======================================== */

@media (max-width: 480px) {
  /* 全螢幕寬度按鈕 */
  button,
  input,
  select {
    width: 100%;
    max-width: 100%;
  }
  
  /* 縮小標題 */
  h1 { font-size: var(--font-size-2xl); }
  h2 { font-size: var(--font-size-xl); }
  h3 { font-size: var(--font-size-lg); }
  
  /* 更緊湊的padding */
  body {
    padding: var(--spacing-md);
  }
  
  .header-container,
  .select-area-container,
  .table-container {
    padding: var(--spacing-lg);
  }
  
  /* 單欄佈局 */
  .export-buttons {
    flex-direction: column;
    gap: var(--spacing-md);
  }
  
  /* 減少logo區域的寬度 */
  .last-updated-container {
    flex-direction: column;
    width: 100%;
  }
  
  /* 選擇框堆疊 */
  .select-container {
    min-width: 100%;
  }
  
  /* 減小卡片內容 */
  .stat-card {
    padding: var(--spacing-md);
  }
  
  .stat-value {
    font-size: 20px;
  }
  
  .stat-label {
    font-size: 11px;
  }
}

/* ========================================
   10. 平板優化 (768px 到 1024px)
   ======================================== */

@media (min-width: 768px) and (max-width: 1024px) {
  .select-area-container {
    flex-direction: row;
    flex-wrap: wrap;
  }
  
  .select-container {
    min-width: calc(50% - var(--spacing-sm));
    flex: 1;
  }
  
  .export-buttons {
    flex-wrap: wrap;
  }
  
  .export-buttons button {
    flex: 1;
    min-width: 150px;
  }
  
  /* 調整表格字體 */
  table {
    font-size: var(--font-size-sm);
  }
}

/* ========================================
   11. 深色模式動畫適配
   ======================================== */

[data-theme="dark"] {
  /* 保持深色模式下的動畫流暢 */
  @keyframes pageLoadFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  @keyframes slideDownFade {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

/* ========================================
   12. 無障礙考量 - 尊重使用者偏好
   ======================================== */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  /* 保留必要的視覺反饋，但移除動畫 */
  button:hover {
    opacity: 0.8;
  }
  
  .select-container:hover {
    box-shadow: var(--shadow-lg);
  }
}
