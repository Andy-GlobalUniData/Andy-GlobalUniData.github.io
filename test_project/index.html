<link rel="stylesheet" href="css/leaflet-google.css" />
<!DOCTYPE html>
<html lang="zh-TW">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Andy Global Uni Data</title>

  <!-- 版權聲明 -->
  <!-- 
    Andy Global Uni Data - 全球大學資料查詢平台
    Copyright (C) [2025] [@Andy87877]

    All rights reserved.

    This software is provided "as is" and is intended for personal or internal use only. 
    Users are **not permitted** to modify, distribute, or create derivative works based on this software.
    Forking, reverse engineering, or any modifications are strictly prohibited.

    For inquiries regarding usage rights, please contact [andy8787main@gmail.com].
    
    網站: https://andy-globalunidata.github.io/
    GitHub: https://github.com/Andy-GlobalUniData/Andy-GlobalUniData.github.io
  -->

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- CSS Files -->
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/floating-nav.css">
  <link rel="stylesheet" href="css/leaflet-google.css" />
  <link rel="stylesheet" href="css/modules.css">

  <!-- External Libraries CSS -->
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />

  <!-- Leaflet CSS for SchoolMap -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>

<body>


  <!-- Hamburger Floating Navigation Sidebar -->
  <div id="floating-nav-wrapper">
    <button id="floating-nav-toggle" aria-label="Open navigation" class="floating-nav-hamburger">
      <span class="hamburger-bar"></span>
      <span class="hamburger-bar"></span>
      <span class="hamburger-bar"></span>
    </button>
    <nav id="floating-nav" class="floating-nav">
      <div class="floating-nav-title">快速導覽</div>
      <ul>
        <li><a href="#top-anchor"><span class="nav-icon">⬆️</span>Top</a></li>
        <li><a href="#country-anchor"><span class="nav-icon">🌏</span>Select Country</a></li>
        <li><a href="#json-table-anchor"><span class="nav-icon">📋</span>json-table</a></li>
        <li><a href="#school-data-table-anchor"><span class="nav-icon">🏫</span>School Data Table</a></li>
        <li><a href="#school-map-anchor"><span class="nav-icon">🗺️</span>School Locations on Map</a></li>
      </ul>
    </nav>
  </div>

  <!-- Top Anchor -->
  <a id="top-anchor"></a>

  <!-- YouTube風格的頁面頭部 -->
  <div class="header-container">
    <div class="header-left">
      <div class="brand-area">
        <div class="brand-logo">A</div>
        <div class="brand-text">
          <h1>Andy Global Uni Data</h1>
          <p>全球大學資料查詢平台</p>
        </div>
      </div>
      <div class="last-updated-container">
        <h3>最後更新時間:</h3>
        <div id="github-push-time" class="loading">載入中...</div>
      </div>
    </div>
    <div class="header-right">
      <div class="header-controls">
        <button id="show-changelog" class="secondary-btn">
          <span class="btn-icon">📋</span>
          更新日誌
        </button>
        <button id="theme-toggle" class="theme-toggle">
          <span class="icon">🌙</span>
          <span class="text">深色模式</span>
        </button>
      </div>
      <div class="export-buttons">
        <button id="export-json" class="primary">
          <span class="btn-icon">📄</span>
          Export JSON
        </button>
        <button id="export-excel" class="primary">
          <span class="btn-icon">📊</span>
          Export Excel
        </button>
        <button id="export-txt" class="secondary-btn">
          <span class="btn-icon">📝</span>
          Export URL (TXT)
        </button>
        <button id="copy-all-urls" class="secondary-btn">
          <span class="btn-icon">📋</span>
          Copy All URLs
        </button>
      </div>
    </div>
  </div>

  <!-- 更新日誌彈窗 -->
  <div id="changelog-modal" class="changelog-modal">
    <div class="changelog-modal-content">
      <span class="changelog-close">&times;</span>
      <h2>🔄 更新日誌</h2>
      <div id="changelog-list">
        <div class="loading-placeholder">
          載入中...
        </div>
      </div>
    </div>
  </div>

  <!-- YouTube風格的用戶指南卡片 -->
  <div class="container">
    <div class="user-guide">
      <div class="guide-header">
        <h3 class="guide-title">
          <span class="guide-icon">💡</span>
          <strong>使用說明</strong>
        </h3>
      </div>
      <div class="guide-content">
        <div class="guide-section">
          <p><strong>1. 選擇篩選條件</strong><br>
            請先選擇國家、學校、學位，表格會自動篩選顯示對應資料。</p>

          <p><strong>2. 搜尋功能</strong><br>
            可於表格上方搜尋欄快速查找科系或網址。</p>
        </div>
        <div class="guide-section">
          <p><strong>3. 複製功能</strong><br>
            點選每列的 <strong>Copy URL</strong> 可複製該科系網址。</p>

          <p><strong>4. 匯出功能</strong><br>
            <strong>Export JSON</strong>、<strong>Export Excel</strong>、<strong>Export URL (TXT)</strong> 會匯出你勾選的資料。
          </p>
        </div>
      </div>
      <div class="guide-notice">
        <p class="notice-text">
          ⚠️ <strong>注意：</strong>本工具僅供查詢使用，請勿未經授權轉載或修改。若遇資料載入異常，請重新整理頁面。
        </p>
      </div>
    </div>
  </div>

  <!-- 選擇器區域 - 改進的滾輪選擇設計 -->
  <div class="container">
    <a id="country-anchor"></a>
    <div class="select-area-container">
      <h2 class="section-title">📊 資料篩選</h2>
      <div class="select-grid-container">

        <!-- 國家選擇框 -->
        <div class="scroll-select-container">
          <h3 class="select-title">🌍 選擇國家</h3>
          <div class="scroll-select-box">
            <div id="country-selector-content" class="scroll-content">
              <div class="loading-placeholder">載入中...</div>
            </div>
          </div>
        </div>

        <!-- 學校選擇框 -->
        <div class="scroll-select-container">
          <h3 class="select-title">🏫 選擇學校</h3>
          <div class="scroll-select-box">
            <div id="school-selector-content" class="scroll-content">
              <div class="loading-placeholder">載入中...</div>
            </div>
          </div>
        </div>

        <!-- 學位選擇框 -->
        <div class="scroll-select-container">
          <h3 class="select-title">🎓 選擇學位</h3>
          <div class="scroll-select-box">
            <div id="degree-selector-content" class="scroll-content">
              <div class="loading-placeholder">載入中...</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 科系查詢區域 -->
  <div class="container">
    <div class="department-search-container">
      <h3>🔍 科系查詢</h3>
      <div class="search-box-container">
        <input type="text" id="department-search" placeholder="輸入科系名稱進行查詢..." class="department-search-input">
        <button id="clear-search" class="clear-search-btn">清除</button>
      </div>
      <div id="search-results-info" class="search-info"></div>
    </div>
  </div>

  <!-- 標籤頁功能區域 -->
  <div class="container">
    <div class="tabs-container">
      <div class="tabs-header">
        <button class="tab-button active" data-tab="department-data">
          <span class="tab-icon">📋</span>
          <span class="tab-text">科系資料</span>
        </button>
        <button class="tab-button" data-tab="school-data">
          <span class="tab-icon">🏫</span>
          <span class="tab-text">學校資料</span>
        </button>
        <button class="tab-button" data-tab="map-view">
          <span class="tab-icon">🗺️</span>
          <span class="tab-text">地圖檢視</span>
        </button>
      </div>

      <div class="tabs-content">
        <!-- 科系資料標籤頁 -->
        <div class="tab-panel active" id="department-data">
          <a id="json-table-anchor"></a>
          <div class="table-container">
            <h3>📊 科系資料表</h3>
            <table id="json-table" class="display">
              <thead>
                <tr>
                  <th>選擇</th>
                  <th>國家</th>
                  <th>學校名稱</th>
                  <th>科系名稱</th>
                  <th>學位等級</th>
                  <th>網址</th>
                  <th>操作</th>
                </tr>
              </thead>
              <tbody>
              </tbody>
            </table>
          </div>
        </div>

        <!-- 學校資料標籤頁 -->
        <div class="tab-panel" id="school-data">
          <a id="school-data-table-anchor"></a>
          <div class="table-container" id="school-data-table-container">
            <h3>🏫 學校資料表</h3>
            <table id="school-data-table" class="display">
              <thead>
                <tr>
                  <th>學校名稱</th>
                  <th>國家</th>
                  <th>城市</th>
                  <th>科系數量</th>
                  <th>合作集團</th>
                  <th>學校網址</th>
                </tr>
              </thead>
              <tbody>
              </tbody>
            </table>
          </div>
        </div>

        <!-- 地圖檢視標籤頁 -->
        <div class="tab-panel" id="map-view">
          <a id="school-map-anchor"></a>
          <div class="table-container">
            <h3>🗺️ 學校位置地圖</h3>
            <div id="school-map-container">
              <!-- 地圖容器將由SchoolMap.js生成 -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  </main>

  <!-- Footer with Copyright -->
  <footer class="site-footer">
    <div class="footer-content">
      <div class="footer-section">
        <h4>Andy Global Uni Data</h4>
        <p>全球大學資料查詢平台</p>
      </div>

      <div class="footer-section">
        <h4>聯絡資訊</h4>
        <p>網站: <a href="https://andy-globalunidata.github.io/" target="_blank"
            rel="noopener noreferrer">andy-globalunidata.github.io</a></p>
        <p>GitHub: <a href="https://github.com/Andy-GlobalUniData/Andy-GlobalUniData.github.io" target="_blank"
            rel="noopener noreferrer">查看原始碼</a></p>
      </div>

      <div class="footer-section">
        <h4>版權資訊</h4>
        <p>Copyright (C) [2025] [@Andy87877]</p>
        <p>All rights reserved. Personal or internal use only.</p>
      </div>
    </div>

    <div class="footer-bottom">
      <p>This software is provided "as is" and is intended for personal or internal use only.</p>
      <p>Users are not permitted to modify, distribute, or create derivative works based on this software.</p>
      <p>For inquiries regarding usage rights, please contact <a
          href="mailto:andy8787main@gmail.com">andy8787main@gmail.com</a></p>
    </div>
  </footer>

  <!-- JavaScript Libraries -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.16.9/xlsx.full.min.js"></script>

  <!-- Modular System Scripts -->
  <!-- Core Module -->
  <script src="scripts/modules/CoreModule.js"></script>
  
  <!-- Feature Modules -->
  <script src="scripts/modules/DepartmentModule.js"></script>
  <script src="scripts/modules/SchoolModule.js"></script>
  <script src="scripts/modules/MapModule.js"></script>
  <script src="scripts/modules/ExportManagerModule.js"></script>
  
  <!-- UI Modules -->
  <script src="scripts/modules/TabManagerModule.js"></script>
  
  <!-- Application Manager -->
  <script src="scripts/modules/AppManager.js"></script>
  
  <!-- Development Tools (only in dev mode) -->
  <script src="scripts/modules/ModularSystemTest.js"></script>
  
  <!-- Legacy Scripts (if still needed) -->
  <script src="scripts/ui-controls.js"></script>
  <script src="scripts/ui-interactions.js"></script>

</body>

</html>