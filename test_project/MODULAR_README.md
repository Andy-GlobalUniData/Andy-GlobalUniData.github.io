# Andy Global Uni Data - æ¨¡å¡ŠåŒ–é‡æ§‹ v2.0

## ğŸ¯ é‡æ§‹ç›®æ¨™

æœ¬æ¬¡é‡æ§‹å°‡åŸæœ¬çš„å–®é«”æ‡‰ç”¨ç¨‹åºæ‹†åˆ†ç‚ºç¨ç«‹çš„æ¨¡å¡Šï¼Œå¯¦ç¾äº†ï¼š

- ğŸ“‹ **ç§‘ç³»è³‡æ–™æ¨¡å¡Š** (`DepartmentModule`) - ç¨ç«‹è™•ç†ç§‘ç³»æ•¸æ“šé¡¯ç¤ºå’Œæ“ä½œ
- ğŸ« **å­¸æ ¡è³‡æ–™æ¨¡å¡Š** (`SchoolModule`) - ç¨ç«‹è™•ç†å­¸æ ¡æ•¸æ“šé¡¯ç¤ºå’Œç®¡ç†  
- ğŸ—ºï¸ **åœ°åœ–æª¢è¦–æ¨¡å¡Š** (`MapModule`) - ç¨ç«‹è™•ç†åœ°åœ–é¡¯ç¤ºå’Œå­¸æ ¡ä½ç½®æ¨™è¨˜
- âš™ï¸ **æ ¸å¿ƒæ¨¡å¡Š** (`CoreModule`) - çµ±ä¸€çš„æ•¸æ“šç®¡ç†å’Œç¯©é¸åŠŸèƒ½
- ğŸ›ï¸ **æ¨™ç±¤é ç®¡ç†æ¨¡å¡Š** (`TabManagerModule`) - æ¨™ç±¤é åˆ‡æ›å’Œç‹€æ…‹ç®¡ç†
- ğŸ“¤ **åŒ¯å‡ºç®¡ç†æ¨¡å¡Š** (`ExportManagerModule`) - çµ±ä¸€çš„åŒ¯å‡ºåŠŸèƒ½

## ğŸ—ï¸ æ¶æ§‹è¨­è¨ˆ

### æ¨¡å¡Šæ¶æ§‹åœ–
```
AppManager (æ‡‰ç”¨ç¨‹åºç®¡ç†å™¨)
â”œâ”€â”€ CoreModule (æ ¸å¿ƒæ¨¡å¡Š)
â”‚   â”œâ”€â”€ æ•¸æ“šè¼‰å…¥ç®¡ç†
â”‚   â”œâ”€â”€ ç¯©é¸å™¨ç³»çµ±
â”‚   â”œâ”€â”€ äº‹ä»¶ç¸½ç·š
â”‚   â””â”€â”€ å…¨å±€ç‹€æ…‹ç®¡ç†
â”œâ”€â”€ DepartmentModule (ç§‘ç³»è³‡æ–™æ¨¡å¡Š)
â”‚   â”œâ”€â”€ DataTable ç®¡ç†
â”‚   â”œâ”€â”€ æœå°‹åŠŸèƒ½
â”‚   â””â”€â”€ è¡Œé¸æ“‡ç®¡ç†
â”œâ”€â”€ SchoolModule (å­¸æ ¡è³‡æ–™æ¨¡å¡Š) 
â”‚   â”œâ”€â”€ å­¸æ ¡æ•¸æ“šè¡¨æ ¼
â”‚   â”œâ”€â”€ å­¸æ ¡ç¯©é¸åŠŸèƒ½
â”‚   â””â”€â”€ çµ±è¨ˆä¿¡æ¯
â”œâ”€â”€ MapModule (åœ°åœ–æª¢è¦–æ¨¡å¡Š)
â”‚   â”œâ”€â”€ Leaflet åœ°åœ–ç®¡ç†
â”‚   â”œâ”€â”€ å­¸æ ¡ä½ç½®æ¨™è¨˜
â”‚   â””â”€â”€ åœ°åœ–æ§åˆ¶åŠŸèƒ½
â”œâ”€â”€ TabManagerModule (æ¨™ç±¤é ç®¡ç†)
â”‚   â”œâ”€â”€ æ¨™ç±¤é åˆ‡æ›
â”‚   â”œâ”€â”€ ç‹€æ…‹ç®¡ç†
â”‚   â””â”€â”€ éºµåŒ…å±‘å°èˆª
â””â”€â”€ ExportManagerModule (åŒ¯å‡ºç®¡ç†)
    â”œâ”€â”€ JSON åŒ¯å‡º
    â”œâ”€â”€ Excel åŒ¯å‡º
    â”œâ”€â”€ TXT åŒ¯å‡º
    â””â”€â”€ URL è¤‡è£½
```

## ğŸ“ æ–‡ä»¶çµæ§‹

```
scripts/
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ AppManager.js          # æ‡‰ç”¨ç¨‹åºå…¥å£å’Œå”èª¿å™¨
â”‚   â”œâ”€â”€ CoreModule.js          # æ ¸å¿ƒåŠŸèƒ½æ¨¡å¡Š
â”‚   â”œâ”€â”€ DepartmentModule.js    # ç§‘ç³»è³‡æ–™æ¨¡å¡Š
â”‚   â”œâ”€â”€ SchoolModule.js        # å­¸æ ¡è³‡æ–™æ¨¡å¡Š
â”‚   â”œâ”€â”€ MapModule.js           # åœ°åœ–æª¢è¦–æ¨¡å¡Š
â”‚   â”œâ”€â”€ TabManagerModule.js    # æ¨™ç±¤é ç®¡ç†æ¨¡å¡Š
â”‚   â””â”€â”€ ExportManagerModule.js # åŒ¯å‡ºç®¡ç†æ¨¡å¡Š
â”œâ”€â”€ ui-controls.js             # UI æ§åˆ¶ï¼ˆä¿ç•™ï¼‰
â””â”€â”€ ui-interactions.js         # UI äº¤äº’ï¼ˆä¿ç•™ï¼‰
css/
â”œâ”€â”€ style.css                  # ä¸»è¦æ¨£å¼
â”œâ”€â”€ floating-nav.css           # æµ®å‹•å°èˆªæ¨£å¼
â”œâ”€â”€ leaflet-google.css         # åœ°åœ–æ¨£å¼
â””â”€â”€ modules.css                # æ¨¡å¡Šå°ˆç”¨æ¨£å¼
```

## ğŸ”§ æ¨¡å¡Šè©³ç´°èªªæ˜

### CoreModule (æ ¸å¿ƒæ¨¡å¡Š)
- **è·è²¬**: æ•¸æ“šè¼‰å…¥ã€ç¯©é¸ç®¡ç†ã€äº‹ä»¶ç³»çµ±
- **ä¸»è¦åŠŸèƒ½**:
  - è¼‰å…¥ä¸‰å€‹ä¸»è¦æ•¸æ“šæ–‡ä»¶ (data.json, School_data.json, Degree_data.json)
  - çµ±ä¸€çš„ç¯©é¸å™¨ç³»çµ± (åœ‹å®¶ã€å­¸æ ¡ã€å­¸ä½)
  - äº‹ä»¶ç¸½ç·šç³»çµ±ç”¨æ–¼æ¨¡å¡Šé–“é€šä¿¡
  - æœå°‹åŠŸèƒ½
- **äº‹ä»¶**: `dataLoaded`, `filterChanged`, `searchCompleted`, `coreReady`

### DepartmentModule (ç§‘ç³»è³‡æ–™æ¨¡å¡Š)
- **è·è²¬**: ç§‘ç³»æ•¸æ“šçš„é¡¯ç¤ºã€æœç´¢ã€é¸æ“‡
- **ä¸»è¦åŠŸèƒ½**:
  - DataTable ç®¡ç†å’Œé…ç½®
  - æœå°‹åŠŸèƒ½ (ç§‘ç³»åç¨±ã€å­¸æ ¡åç¨±)
  - è¡Œé¸æ“‡å’Œè·¨é é¸æ“‡è¿½è¹¤
  - URL è¤‡è£½åŠŸèƒ½
- **ä¾è³´**: CoreModule
- **äº‹ä»¶**: `selectionChanged`

### SchoolModule (å­¸æ ¡è³‡æ–™æ¨¡å¡Š)
- **è·è²¬**: å­¸æ ¡æ•¸æ“šçš„é¡¯ç¤ºå’Œç®¡ç†
- **ä¸»è¦åŠŸèƒ½**:
  - å­¸æ ¡æ•¸æ“šè¡¨æ ¼
  - ç§‘ç³»æ•¸é‡çµ±è¨ˆ
  - å­¸æ ¡ç¯©é¸åŠŸèƒ½
  - å­¸æ ¡çµ±è¨ˆä¿¡æ¯
- **ä¾è³´**: CoreModule

### MapModule (åœ°åœ–æª¢è¦–æ¨¡å¡Š)
- **è·è²¬**: åœ°åœ–é¡¯ç¤ºå’Œå­¸æ ¡ä½ç½®æ¨™è¨˜
- **ä¸»è¦åŠŸèƒ½**:
  - Leaflet åœ°åœ–åˆå§‹åŒ–å’Œç®¡ç†
  - å­¸æ ¡ä½ç½®æ¨™è¨˜
  - åœ°åœ–æ§åˆ¶é¢æ¿
  - å½ˆå‡ºè¦–çª—ä¿¡æ¯
  - éŸ¿æ‡‰ç¯©é¸è®ŠåŒ–
- **ä¾è³´**: CoreModule, Leaflet åº«

### TabManagerModule (æ¨™ç±¤é ç®¡ç†æ¨¡å¡Š)
- **è·è²¬**: ç®¡ç†ä¸‰å€‹ä¸»è¦æ¨™ç±¤é çš„åˆ‡æ›
- **ä¸»è¦åŠŸèƒ½**:
  - æ¨™ç±¤é ç‹€æ…‹ç®¡ç†
  - åˆ‡æ›å‹•ç•«æ•ˆæœ
  - éºµåŒ…å±‘å°èˆª
  - éµç›¤å¿«æ·éµæ”¯æŒ (Ctrl+1/2/3)
- **ä¾è³´**: CoreModule

### ExportManagerModule (åŒ¯å‡ºç®¡ç†æ¨¡å¡Š)
- **è·è²¬**: çµ±ä¸€çš„åŒ¯å‡ºåŠŸèƒ½
- **ä¸»è¦åŠŸèƒ½**:
  - JSON åŒ¯å‡º
  - Excel åŒ¯å‡º (ä½¿ç”¨ XLSX.js)
  - TXT åŒ¯å‡º (URLs)
  - æ‰¹é‡åŒ¯å‡º
  - è¤‡è£½æ‰€æœ‰ URLs
- **ä¾è³´**: CoreModule, DepartmentModule

## ğŸ›ï¸ äº‹ä»¶ç³»çµ±

æ¨¡å¡Šé–“é€šéäº‹ä»¶ç³»çµ±é€²è¡Œé€šä¿¡ï¼Œä¸»è¦äº‹ä»¶åŒ…æ‹¬ï¼š

```javascript
// æ ¸å¿ƒäº‹ä»¶
'dataLoaded'        // æ•¸æ“šè¼‰å…¥å®Œæˆ
'filterChanged'     // ç¯©é¸å™¨è®ŠåŒ–
'searchCompleted'   // æœå°‹å®Œæˆ
'coreReady'         // æ ¸å¿ƒæ¨¡å¡Šå°±ç·’

// UI äº‹ä»¶
'tabChanged'        // æ¨™ç±¤é è®ŠåŒ–
'selectionChanged'  // é¸æ“‡è®ŠåŒ–

// æ‡‰ç”¨ç¨‹åºäº‹ä»¶
'appReady'          // æ‡‰ç”¨ç¨‹åºå°±ç·’
```

## ğŸš€ ä½¿ç”¨æ–¹å¼

### é–‹ç™¼æ¨¡å¼
1. è¼‰å…¥æ‰€æœ‰æ¨¡å¡Šæ–‡ä»¶
2. `AppManager.js` æœƒè‡ªå‹•åˆå§‹åŒ–æ‰€æœ‰æ¨¡å¡Š
3. æ‡‰ç”¨ç¨‹åºæœƒåœ¨ `appReady` äº‹ä»¶è§¸ç™¼æ™‚å®Œå…¨å°±ç·’

### æ·»åŠ æ–°åŠŸèƒ½
1. å‰µå»ºæ–°çš„æ¨¡å¡Šæ–‡ä»¶
2. ç¹¼æ‰¿åŸºæœ¬æ¨¡å¡Šçµæ§‹
3. åœ¨ `AppManager` ä¸­è¨»å†Šæ–°æ¨¡å¡Š
4. ä½¿ç”¨äº‹ä»¶ç³»çµ±èˆ‡å…¶ä»–æ¨¡å¡Šé€šä¿¡

### æ¨¡å¡Šæ¨¡æ¿
```javascript
class NewModule {
    constructor(coreModule) {
        this.core = coreModule;
        this.isInitialized = false;
    }
    
    init() {
        this.core.registerModule('newModule', this);
        this.core.on('coreReady', () => this.setup());
    }
    
    setup() {
        // æ¨¡å¡Šåˆå§‹åŒ–é‚è¼¯
        this.isInitialized = true;
    }
    
    destroy() {
        this.isInitialized = false;
    }
}
```

## ğŸ“‹ TODO æ¸…å–®

- [ ] æ·»åŠ å–®å…ƒæ¸¬è©¦
- [ ] å¯¦ä½œæ¨™è¨˜èšåˆåŠŸèƒ½
- [ ] æ·»åŠ æ›´å¤šåŒ¯å‡ºæ ¼å¼
- [ ] å¯¦ä½œæ•¸æ“šç·©å­˜æ©Ÿåˆ¶
- [ ] æ·»åŠ é›¢ç·šæ”¯æŒ
- [ ] æ€§èƒ½ç›£æ§å’Œå„ªåŒ–
- [ ] æ·»åŠ æ›´å¤šéµç›¤å¿«æ·éµ
- [ ] å¯¦ä½œä¸»é¡Œç³»çµ±æ¨¡å¡ŠåŒ–

## ğŸ”„ å¾èˆŠç‰ˆæœ¬é·ç§»

èˆŠç‰ˆæœ¬çš„åŠŸèƒ½å·²ç¶“å®Œå…¨ä¿ç•™ï¼Œåªæ˜¯é‡æ–°çµ„ç¹”åˆ°ä¸åŒçš„æ¨¡å¡Šä¸­ï¼š

- `main_complete.js` â†’ `DepartmentModule.js`
- `School_data.js` + `loadSchoolData.js` â†’ `SchoolModule.js`
- `SchoolMap.js` â†’ `MapModule.js`
- `exportManager.js` â†’ `ExportManagerModule.js`
- `degreeFilter_complete.js` â†’ `CoreModule.js` (ç¯©é¸åŠŸèƒ½)

## ğŸ¨ æ¨£å¼ç³»çµ±

æ–°å¢ `modules.css` åŒ…å«ï¼š
- æ¨¡å¡Šå°ˆç”¨æ¨£å¼
- åœ°åœ–æ§åˆ¶é¢æ¿æ¨£å¼
- æ¨™ç±¤é å¢å¼·æ¨£å¼
- éŸ¿æ‡‰å¼è¨­è¨ˆæ”¹é€²
- æ·±è‰²ä¸»é¡Œé©é…

## ğŸ› ï¸ èª¿è©¦å’Œç›£æ§

ä½¿ç”¨ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·ï¼š
```javascript
// ç²å–æ‡‰ç”¨ç¨‹åºçµ±è¨ˆ
window.app.getAppStats()

// ç²å–ç‰¹å®šæ¨¡å¡Š
window.app.getModule('department')

// é‡å•Ÿæ‡‰ç”¨ç¨‹åº
window.app.restart()

// æŸ¥çœ‹æ‰€æœ‰æ¨¡å¡Š
window.app.getAllModules()
```

## ğŸ“ æ”¯æ´

å¦‚æœé‡åˆ°å•é¡Œï¼š
1. æª¢æŸ¥ç€è¦½å™¨æ§åˆ¶å°æ˜¯å¦æœ‰éŒ¯èª¤è¨Šæ¯
2. ç¢ºèªæ‰€æœ‰æ¨¡å¡Šæ–‡ä»¶å·²æ­£ç¢ºè¼‰å…¥
3. æª¢æŸ¥æ•¸æ“šæ–‡ä»¶æ˜¯å¦å¯æ­£å¸¸è¨ªå•
4. é‡æ–°æ•´ç†é é¢é‡æ–°åˆå§‹åŒ–

---

**ç‰ˆæœ¬**: 2.0.0  
**æœ€å¾Œæ›´æ–°**: 2025-08-02  
**ä½œè€…**: [@Andy87877]
